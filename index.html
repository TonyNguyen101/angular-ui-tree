<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AngularJS UI Tree demo</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="bower_components/bootstrap-css/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="source/angular-ui-tree.css">
  <link rel="stylesheet" href="css/app.css">
</head>

<body>






<div ng-app='testApp'>
  <div ng-controller='RecipeApp' class="container">
    <div ng-repeat="recipe in recipes" data-type='{{recipe.type}}'>    
      <div ui-tree="movementOptions" class="col-xs-7">
        <!-- TODO: hide further details in a hover div -->
        <h3>{{recipe.title}}</h3>
        <h4>{{recipe.totalTime}} mins</h4>
        <br>
        <img height="150" src='{{recipe.image}}'>
        <ol ui-tree-nodes ng-model="recipe.vessels" data-type='{{recipe.type}}'>
          <li ui-tree-node ui-tree-handle class='row vesselBox' ng-repeat='vessel in recipe.vessels' data-type='{{vessel.type}}'>  
            <div class="time">{{vessel.time}}</div>
            {{vessel.vesselName}}
            <!-- <a class="pull-right btn btn-danger btn-xs" data-nodrag ng-click="remove(this)"><span class="glyphicon glyphicon-remove"></span></a> -->

            <div ui-tree="movementOptions">
              <ol ui-tree-nodes ng-model='vessel.actions' data-type='{{vessel.type}}'>
                <li ui-tree-node ui-tree-handle class='row actionBox' ng-repeat='action in vessel.actions' data-type='{{action.type}}'>

                  {{action.actionName}}
                  <!-- <a class="pull-right btn btn-danger btn-xs" data-nodrag ng-click="remove(this)"><span class="glyphicon glyphicon-remove"></span></a> -->

                  <div ui-tree="movementOptions">
                    <ol ui-tree-nodes ng-model='action.ingredients' data-type='{{action.type}}'>
                      <li ui-tree-node ui-tree-handle class="row ingredientBox" ng-repeat='ingredient in action.ingredients' data-type='{{ingredient.type}}'>
                          {{ingredient.imperialQuantity}}
                          {{ingredient.imperialUnits}}                        
                          {{ingredient.ingredientName}}
                          <!-- <a class="pull-right btn btn-danger btn-xs" data-nodrag ng-click="remove(this)"><span class="glyphicon glyphicon-remove"></span></a> -->
                      </li>
                    </ol>
                    <!-- New Ingredient Form -->
                    <div class="hideForm" ng-if="action.formVisible">
                      <form name="ingredientForm" ng-submit="addIngredient(ingredientForm.$valid)" class="form-group" novalidate>
                        <!-- TODO add inputs for units and ammount -->
                        <input type="text" ng-model="newIngredient.ingredientName" class="form-control" placeholder="new ingredient" >
                        <input type="submit" class="btn btn-primary" ng-disabled="ingredientForm.$invalid" value="add">
                      </form>
                    </div>
                    <a href="" ng-click="toggleForm(this)">New ingredient form!</a>
                  </div>
                </li>
              </ol>
              <!-- New Action Form -->
              <div class="hideForm" ng-if="vessel.formVisible">
                <form name="actionForm" ng-submit="addAction(actionForm.$valid)" class="form-group" novalidate>
                  <input type="text" ng-model="newAction.actionName" class="form-control" placeholder="new action">
                  <input type="submit" class="btn btn-primary" ng-disabled="actionForm.$invalid" value="add">
                </form>
              </div>
              <a href="" ng-click="toggleForm(this)">New action form!</a>
            </div>
          </li>
        </ol>

        <!-- Add Vessel Form -->
        <div class="hideForm" ng-if="formVisible">
          <form name="vesselForm" ng-submit="addVessel(vesselForm.$valid)" class="form-group" novalidate>
            <input type="text" ng-model="newVessel.vesselName" class="form-control" placeholder="new vessel">
            <input type="number" ng-model="newVessel.time" class="form-control" placeholder="duration">            
            <input type="submit" class="btn btn-primary" ng-disabled="vesselForm.$invalid" value="add">
          </form>
        </div>
        <a href="" ng-click="toggleVesselForm()">New vessel form!</a>

      </div>
    <div class="col-sm-5">
      <pre class="code">{{recipes | json}}</pre>
    </div>  
  </div>

  </div>
</div>

























<!-- JavaScript -->
<!--[if IE 8]>
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/3.4.0/es5-shim.min.js"></script>
<![endif]-->


<script src="bower_components/angular/angular.min.js"></script>
<script src="bower_components/angular-route/angular-route.min.js"></script>

<!-- load Angular-AnimateJS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular-animate.js"></script>

<script src="source/main.js"></script>
<script src="source/controllers/handleCtrl.js"></script>
<script src="source/controllers/nodeCtrl.js"></script>
<script src="source/controllers/nodesCtrl.js"></script>
<script src="source/controllers/treeCtrl.js"></script>
<script src="source/directives/uiTree.js"></script>
<script src="source/directives/uiTreeHandle.js"></script>
<script src="source/directives/uiTreeNode.js"></script>
<script src="source/directives/uiTreeNodes.js"></script>
<script src="source/services/helper.js"></script>

<script src="app.js"></script>

<script src="js/app.js"></script>

<script src="js/basic-example.js"></script>

<script src="js/filter-nodes.js"></script>
<script src="js/cloning.js"></script>
<script src="js/connected-trees.js"></script>

</body>
</html>
 